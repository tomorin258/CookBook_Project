<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.mappers.RecipeIngredientsMapper">

    <!-- add recipe_ingredients -->
    <insert id="addRecipeIngredients" parameterType="RecipeIngredients">
        INSERT INTO recipe_ingredients (recipe_id, ingredient_id, quantity)
        VALUES (#{recipeIngredients.recipeId}, #{recipeIngredients.ingredientId}, #{recipeIngredients.quantity})
    </insert>

    <!-- delete recipe_ingredients by recipeId and ingredientId -->
    <delete id="deleteRecipeIngredients">
        DELETE FROM recipe_ingredients
        WHERE recipe_id = #{recipeId} AND ingredient_id = #{ingredientId}
    </delete>

    <!-- update recipe_ingredients -->
    <update id="updateRecipeIngredients" parameterType="RecipeIngredients">
        UPDATE recipe_ingredients
        SET quantity = #{recipeIngredients.quantity}
        WHERE recipe_id = #{recipeIngredients.recipeId}
          AND ingredient_id = #{recipeIngredients.ingredientId}
    </update>

    <!-- Get recipe ingredient by its recipe ID and ingredient ID -->
    <select id="getRecipeIngredientsById" resultType="RecipeIngredients">
        SELECT recipe_id, ingredient_id, quantity
        FROM recipe_ingredients
        WHERE recipe_id = #{recipeId} AND ingredient_id = #{ingredientId}
    </select>

    <!-- Get all ingredients for a specific recipe. -->
    <select id="getRecipeIngredientsByRecipeId" resultType="RecipeIngredients" parameterType="int">
        SELECT recipe_id, ingredient_id, quantity
        FROM recipe_ingredients
        WHERE recipe_id = #{recipeId}
    </select>

    <!-- Get all recipes that use a specific ingredient -->
    <select id="getRecipeIngredientsByIngredientId" resultType="RecipeIngredients" parameterType="int">
        SELECT recipe_id, ingredient_id, quantity
        FROM recipe_ingredients
        WHERE ingredient_id = #{ingredientId}
    </select>

</mapper>